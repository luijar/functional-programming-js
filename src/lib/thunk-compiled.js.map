{"version":3,"sources":["thunk.js"],"names":[],"mappings":";;;;;;AAIA,IAAI,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK;IAC/B,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,GAAG;IAC3B,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC,cAAc;IAC1C,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC;;AAEtC,SAAS,QAAQ,CAAE,EAAE,EAAE;AACnB,QAAI,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC;;AAEzB,QAAI,QAAQ,GAAG,CAAC,EAAE;AACd,eAAO,EAAE,CAAC;KACb,MACI,IAAI,QAAQ,KAAK,CAAC,EAAG;AACtB,eAAO,YAAY;AACf,mBAAO,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAA;SACnD,CAAA;KACJ,MACI;AACD,eAAO,YAAY;AACf,gBAAI,YAAY,GAAG,SAAS,CAAC,MAAM;gBAC/B,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,EAAE,QAAQ,GAAG,CAAC,CAAC;gBACpD,wBAAwB,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,YAAY,GAAG,CAAC,EAAE,CAAC,CAAC;gBACnE,UAAU,GAAG,IAAI,KAAK,CAAC,wBAAwB,CAAC;gBAChD,YAAY,GAAG,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;;AAE1D,mBAAO,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAA;SAC7E,CAAA;KACJ;CACJ,CAAC;;AAGF,SAAS,KAAK,CAAE,OAAO,EAAE;AACrB,QAAI,EAAE,IAAI,YAAY,KAAK,CAAA,AAAC,EACxB,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;;AAE9B,QAAI,CAAC,OAAO,GAAG,OAAO,CAAC;CAC1B,CAAC;AACF,KAAK,CAAC,SAAS,CAAC,KAAK,GAAG,YAAY;AAChC,WAAO,IAAI,CAAC,OAAO,EAAE,CAAC;CACzB,CAAC;;AAEF,SAAS,UAAU,CAAE,EAAE,EAAE;AACrB,QAAI,WAAW,GAAG,QAAQ,CAAE,UAAU,IAAI,EAAE;AACxC,YAAI,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;AAElC,eAAO,MAAM,YAAY,KAAK,EAAE;AAC5B,kBAAM,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC;SAC3B;;AAED,eAAO,MAAM,CAAC;KACjB,CAAC,CAAC;AACH,eAAW,CAAC,gBAAgB,GAAG,EAAE,CAAC;AAClC,WAAO,WAAW,CAAC;CACtB,CAAC;;AAEF,IAAI,KAAK,GAAG,QAAQ,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE;AACrC,QAAI,OAAO,GAAG,IAAI,CAAC;AACnB,QAAI,EAAE,CAAC,gBAAgB,YAAY,QAAQ,EAAE;AACzC,eAAO,IAAI,KAAK,CAAC,YAAY;AACzB,mBAAO,EAAE,CAAC,gBAAgB,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;SACnD,CAAC,CAAC;KACN,MACI,OAAO,IAAI,KAAK,CAAE,YAAY;AAC/B,eAAO,EAAE,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;KAClC,CAAC,CAAC;CACN,CAAC,CAAC","file":"thunk-compiled.js","sourcesContent":["/**\n *\n *\n */\nvar __slice = Array.prototype.slice,\n    __map = Array.prototype.map,\n    __hasProp = Array.prototype.hasOwnProperty,\n    __filter = Array.prototype.filter;\n\nfunction variadic (fn) {\n    var fnLength = fn.length;\n\n    if (fnLength < 1) {\n        return fn;\n    }\n    else if (fnLength === 1)  {\n        return function () {\n            return fn.call(this, __slice.call(arguments, 0))\n        }\n    }\n    else {\n        return function () {\n            var numberOfArgs = arguments.length,\n                namedArgs = __slice.call(arguments, 0, fnLength - 1),\n                numberOfMissingNamedArgs = Math.max(fnLength - numberOfArgs - 1, 0),\n                argPadding = new Array(numberOfMissingNamedArgs),\n                variadicArgs = __slice.call(arguments, fn.length - 1);\n\n            return fn.apply(this, namedArgs.concat(argPadding).concat([variadicArgs]))\n        }\n    }\n};\n\n\nfunction Thunk (closure) {\n    if (!(this instanceof Thunk))\n        return new Thunk(closure);\n\n    this.closure = closure;\n};\nThunk.prototype.force = function () {\n    return this.closure();\n};\n\nfunction trampoline (fn) {\n    var trampolined = variadic( function (args) {\n        var result = fn.apply(this, args);\n\n        while (result instanceof Thunk) {\n            result = result.force();\n        }\n\n        return result;\n    });\n    trampolined.__trampolined_fn = fn;\n    return trampolined;\n};\n\nvar thunk = variadic(function (fn, args) {\n    var context = this;\n    if (fn.__trampolined_fn instanceof Function) {\n        return new Thunk(function () {\n            return fn.__trampolined_fn.apply(context, args);\n        });\n    }\n    else return new Thunk( function () {\n        return fn.apply(context, args);\n    });\n});\n\n\n\n\n// ================================\n\n//var thunk = function (fn) {\n//    return function () {\n//        var args = Array.prototype.slice.apply(arguments);\n//        return function() { fn.apply(this, args); };\n//    };\n//};\n//\n//var trampoline = function(fun) {\n//    return function( /*, args */) {\n//        var args = Array.prototype.slice.apply(arguments);\n//        var result = fun.apply(fun, args);\n//        while (_.isFunction(result)) {\n//            result = result();\n//        }\n//        return result;\n//    };\n//};\n\n\n//var trampoline = function(fun) {\n//    return function(args) {\n//        var result = fun.apply(fun, args);\n//        while (_.isFunction(result)) {\n//            result = result();\n//        }\n//        return result;\n//    }\n//};\n\n//var tailCall = function (fn, args) {\n//    var context = this;\n//    if (fn.__trampolined_fn instanceof Function) {\n//        return new Thunk( function () {\n//            return fn.__trampolined_fn.apply(context, args);\n//        });\n//    }\n//    else return new Thunk( function () {\n//        return fn.apply(context, args);\n//    });\n//};"]}